$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
$ docker pull golang:1.10.3
1.10.3: Pulling from library/golang
0bd44ff9c2cf: Already exists 
047670ddbd2a: Already exists 
ea7d5dc89438: Already exists 
ae7ad5906a75: Already exists 
15f6351ddb37: Already exists 
823ef4e8c9c9: Already exists 
dca1089cfb86: Already exists 
Digest: sha256:905d58208057843e0fdc9a8f2767c0dc243e037fe03f237b560bef1cf9fbd03c
Status: Downloaded newer image for golang:1.10.3
$ docker pull alpine:latest
latest: Pulling from library/alpine
8e3ba11ec2a2: Already exists 
Digest: sha256:7043076348bf5040220df6ad703798fd8593a0918d06d3ce30c6c93be117e430
Status: Downloaded newer image for alpine:latest
$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
alpine              latest              11cd0b38bc3c        4 days ago          4.41MB
golang              1.10.3              4e611157870f        12 days ago         794MB
$ time make build.docker
go build -o hellogo -v
docker build --rm -t dockerhub/hellogo:c1d5205-20180710224701 -f Dockerfile .
Sending build context to Docker daemon  21.27MB
Step 1/6 : FROM golang:1.10.3 as builder
 ---> 4e611157870f
Step 2/6 : RUN groupadd -g 999 appuser && useradd -r -u 999 -g appuser appuser
 ---> Running in 6696979006cc
Removing intermediate container 6696979006cc
 ---> 5a8616a4c4fa
Step 3/6 : USER appuser
 ---> Running in 6c773d015f27
Removing intermediate container 6c773d015f27
 ---> 0c61c23438e7
Step 4/6 : WORKDIR /app
Removing intermediate container dbf5fcfd0522
 ---> ea80f869e8ab
Step 5/6 : COPY hellogo .
 ---> 4b9658b24874
Step 6/6 : CMD ["./hellogo"]
 ---> Running in c828f2802d75
Removing intermediate container c828f2802d75
 ---> a1789db090c5
Successfully built a1789db090c5
Successfully tagged dockerhub/hellogo:c1d5205-20180710224701

real	0m1.937s
user	0m0.264s
sys	0m0.068s
$ docker images
REPOSITORY          TAG                      IMAGE ID            CREATED             SIZE
dockerhub/hellogo   c1d5205-20180710224701   a1789db090c5        4 seconds ago       801MB
alpine              latest                   11cd0b38bc3c        4 days ago          4.41MB
golang              1.10.3                   4e611157870f        12 days ago         794MB
$ time make build.docker-cache
go build -o hellogo -v
docker build --cache-from golang:1.10.3 --cache-from alpine:latest -t dockerhub/hellogo:c1d5205-20180710224717 -f Dockerfile .
Sending build context to Docker daemon  21.27MB
Step 1/6 : FROM golang:1.10.3 as builder
 ---> 4e611157870f
Step 2/6 : RUN groupadd -g 999 appuser && useradd -r -u 999 -g appuser appuser
 ---> Running in a2475b61d6b3
Removing intermediate container a2475b61d6b3
 ---> 0753b8d52514
Step 3/6 : USER appuser
 ---> Running in 59d8901f3994
Removing intermediate container 59d8901f3994
 ---> 119a16553c7c
Step 4/6 : WORKDIR /app
Removing intermediate container 3c1ca6d7fcc5
 ---> 8cdf7f37cdf9
Step 5/6 : COPY hellogo .
 ---> 24521a6b13c9
Step 6/6 : CMD ["./hellogo"]
 ---> Running in 697b8007bba3
Removing intermediate container 697b8007bba3
 ---> ebe2ea65e001
Successfully built ebe2ea65e001
Successfully tagged dockerhub/hellogo:c1d5205-20180710224717

real	0m1.923s
user	0m0.276s
sys	0m0.056s
$ docker images
REPOSITORY          TAG                      IMAGE ID            CREATED             SIZE
dockerhub/hellogo   c1d5205-20180710224717   ebe2ea65e001        9 seconds ago       801MB
dockerhub/hellogo   c1d5205-20180710224701   a1789db090c5        25 seconds ago      801MB
alpine              latest                   11cd0b38bc3c        4 days ago          4.41MB
golang              1.10.3                   4e611157870f        12 days ago         794MB
$ time make build.dockerbuilder
go build -o hellogo -v
docker build --rm -t dockerhub/hellogo:c1d5205-20180710224742 -f DockerfileBuilder .
Sending build context to Docker daemon  21.27MB
Step 1/10 : FROM golang:1.10.3 as builder
 ---> 4e611157870f
Step 2/10 : WORKDIR /go/src/github.com/lotharschulz/hellogodocker/
Removing intermediate container 4d436c497caa
 ---> f8bbc094e98a
Step 3/10 : COPY hello.go	.
 ---> 9790080b50aa
Step 4/10 : RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o hellogodocker .
 ---> Running in a102a82828cc
Removing intermediate container a102a82828cc
 ---> b7c30a89f790
Step 5/10 : FROM alpine:latest
 ---> 11cd0b38bc3c
Step 6/10 : RUN apk --no-cache add ca-certificates &&     addgroup -g 99 appuser &&     adduser -D -u 99 -G appuser appuser
 ---> Running in 8a8924bb98d8
fetch http://dl-cdn.alpinelinux.org/alpine/v3.8/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.8/community/x86_64/APKINDEX.tar.gz
(1/1) Installing ca-certificates (20171114-r3)
Executing busybox-1.28.4-r0.trigger
Executing ca-certificates-20171114-r3.trigger
OK: 5 MiB in 14 packages
Removing intermediate container 8a8924bb98d8
 ---> 576d1bc8913e
Step 7/10 : USER appuser
 ---> Running in a05faf932e30
Removing intermediate container a05faf932e30
 ---> 33ad2ed1cbc4
Step 8/10 : WORKDIR /app
Removing intermediate container d6ce88e1c3b9
 ---> 6dd8d0e862d3
Step 9/10 : COPY --from=builder /go/src/github.com/lotharschulz/hellogodocker/hellogodocker .
 ---> df46e86dfa64
Step 10/10 : CMD ["./hellogodocker"]
 ---> Running in 2a83265a3a55
Removing intermediate container 2a83265a3a55
 ---> 2b011ca2702a
Successfully built 2b011ca2702a
Successfully tagged dockerhub/hellogo:c1d5205-20180710224742

real	0m12.480s
user	0m0.292s
sys	0m0.048s
$ docker images
REPOSITORY          TAG                      IMAGE ID            CREATED             SIZE
dockerhub/hellogo   c1d5205-20180710224742   2b011ca2702a        3 seconds ago       11.5MB
<none>              <none>                   b7c30a89f790        6 seconds ago       816MB
dockerhub/hellogo   c1d5205-20180710224717   ebe2ea65e001        39 seconds ago      801MB
dockerhub/hellogo   c1d5205-20180710224701   a1789db090c5        55 seconds ago      801MB
alpine              latest                   11cd0b38bc3c        4 days ago          4.41MB
golang              1.10.3                   4e611157870f        12 days ago         794MB
$ time make build.dockerbuilder-cache
go build -o hellogo -v
docker build --cache-from golang:1.10.3 --cache-from alpine:latest -t dockerhub/hellogo:c1d5205-20180710224819 -f DockerfileBuilder .
Sending build context to Docker daemon  21.27MB
Step 1/10 : FROM golang:1.10.3 as builder
 ---> 4e611157870f
Step 2/10 : WORKDIR /go/src/github.com/lotharschulz/hellogodocker/
Removing intermediate container f580b12a2bce
 ---> 9cb548c594a4
Step 3/10 : COPY hello.go	.
 ---> 2101b5c36aa1
Step 4/10 : RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o hellogodocker .
 ---> Running in f51b9a149944
Removing intermediate container f51b9a149944
 ---> 2e5b953d6f7c
Step 5/10 : FROM alpine:latest
 ---> 11cd0b38bc3c
Step 6/10 : RUN apk --no-cache add ca-certificates &&     addgroup -g 99 appuser &&     adduser -D -u 99 -G appuser appuser
 ---> Running in cb6694948cd5
fetch http://dl-cdn.alpinelinux.org/alpine/v3.8/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.8/community/x86_64/APKINDEX.tar.gz
(1/1) Installing ca-certificates (20171114-r3)
Executing busybox-1.28.4-r0.trigger
Executing ca-certificates-20171114-r3.trigger
OK: 5 MiB in 14 packages
Removing intermediate container cb6694948cd5
 ---> 448c7412dcba
Step 7/10 : USER appuser
 ---> Running in 4f1930fffc50
Removing intermediate container 4f1930fffc50
 ---> 710379b55663
Step 8/10 : WORKDIR /app
Removing intermediate container de928c9b3653
 ---> 81f3aaa991ba
Step 9/10 : COPY --from=builder /go/src/github.com/lotharschulz/hellogodocker/hellogodocker .
 ---> 5ce8b8b26bdb
Step 10/10 : CMD ["./hellogodocker"]
 ---> Running in 86c20c3d4fce
Removing intermediate container 86c20c3d4fce
 ---> e4ca56f51052
Successfully built e4ca56f51052
Successfully tagged dockerhub/hellogo:c1d5205-20180710224819

real	0m12.310s
user	0m0.276s
sys	0m0.064s
$ docker images
REPOSITORY          TAG                      IMAGE ID            CREATED              SIZE
dockerhub/hellogo   c1d5205-20180710224819   e4ca56f51052        3 seconds ago        11.5MB
<none>              <none>                   2e5b953d6f7c        6 seconds ago        816MB
dockerhub/hellogo   c1d5205-20180710224742   2b011ca2702a        39 seconds ago       11.5MB
<none>              <none>                   b7c30a89f790        42 seconds ago       816MB
dockerhub/hellogo   c1d5205-20180710224717   ebe2ea65e001        About a minute ago   801MB
dockerhub/hellogo   c1d5205-20180710224701   a1789db090c5        About a minute ago   801MB
alpine              latest                   11cd0b38bc3c        4 days ago           4.41MB
golang              1.10.3                   4e611157870f        12 days ago          794MB
