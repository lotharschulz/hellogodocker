$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
$ docker pull golang:1.10.3
1.10.3: Pulling from library/golang
0bd44ff9c2cf: Already exists 
047670ddbd2a: Already exists 
ea7d5dc89438: Already exists 
ae7ad5906a75: Already exists 
15f6351ddb37: Already exists 
823ef4e8c9c9: Already exists 
dca1089cfb86: Already exists 
Digest: sha256:d4994ca7ac29f5854486556c52c735e9d8b333183a1d863806e0ea84c5aea3d7
Status: Downloaded newer image for golang:1.10.3
$ time make build.docker
go build -o hellogo -v
docker build --rm -t dockerhub/hellogo:c1d5205-dirty-20180717000705 -f Dockerfile .
Sending build context to Docker daemon  21.68MB
Step 1/6 : FROM golang:1.10.3 as builder
 ---> 4e611157870f
Step 2/6 : RUN groupadd -g 999 appuser && useradd -r -u 999 -g appuser appuser
 ---> Running in 74b0e0d982d0
Removing intermediate container 74b0e0d982d0
 ---> 2421efe42473
Step 3/6 : USER appuser
 ---> Running in efa4be136606
Removing intermediate container efa4be136606
 ---> 87313fae2ea7
Step 4/6 : WORKDIR /app
Removing intermediate container 22c1a0277fbf
 ---> a37229d4c38c
Step 5/6 : COPY hellogo .
 ---> 4b582a46ef2b
Step 6/6 : CMD ["./hellogo"]
 ---> Running in b9c88fe36346
Removing intermediate container b9c88fe36346
 ---> e205d8957e07
Successfully built e205d8957e07
Successfully tagged dockerhub/hellogo:c1d5205-dirty-20180717000705

real	0m2.422s
user	0m0.808s
sys	0m0.124s
$ docker images
REPOSITORY          TAG                            IMAGE ID            CREATED             SIZE
dockerhub/hellogo   c1d5205-dirty-20180717000705   e205d8957e07        8 seconds ago       801MB
golang              1.10.3                         4e611157870f        2 weeks ago         794MB
$ docker rmi e205d8957e07
Untagged: dockerhub/hellogo:c1d5205-dirty-20180717000705
Deleted: sha256:e205d8957e0711732262d2753b37d8a5d6a7f7463a77a73807f0413d9233bd87
Deleted: sha256:4b582a46ef2bff7455cd48f6135c92c993c16af028659e6ab94a3a119cd3b818
Deleted: sha256:472499adaed21389c679b4a007709e5ef950420dad8c2c40056c50aa5491f407
Deleted: sha256:a37229d4c38cb7ea8c2755fa33a22bb4cc45f7c010992ea1b736e647b2827e8f
Deleted: sha256:728715bfa23bd08f090bead3d3a7ae284a11b1e2f9a034e2303eae4a6fe3d434
Deleted: sha256:87313fae2ea72902cddd2e1ecb0443894b436b3d514e56fdff6f762c2d25a181
Deleted: sha256:2421efe424735caede80472b5201cf9ed2d6ce4447d856ff0a5c389989d0da57
Deleted: sha256:eb22c05d5f30912a484d0ee31e0f1cf52d4dce92de6aa5af2742622a8f338fc0
$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
golang              1.10.3              4e611157870f        2 weeks ago         794MB
$ time make build.docker-cache
go build -o hellogo -v
docker build --cache-from golang:1.10.3 --cache-from alpine:latest -t dockerhub/hellogo:c1d5205-dirty-20180717000743 -f Dockerfile .
Sending build context to Docker daemon  21.68MB
Step 1/6 : FROM golang:1.10.3 as builder
 ---> 4e611157870f
Step 2/6 : RUN groupadd -g 999 appuser && useradd -r -u 999 -g appuser appuser
 ---> Running in 3e9da1112a6f
Removing intermediate container 3e9da1112a6f
 ---> 17e3e70c2e33
Step 3/6 : USER appuser
 ---> Running in 5440558f4c74
Removing intermediate container 5440558f4c74
 ---> 5d657bb48d5b
Step 4/6 : WORKDIR /app
Removing intermediate container df3e6d7a2455
 ---> 610555b8a071
Step 5/6 : COPY hellogo .
 ---> a4bfa7b8f01f
Step 6/6 : CMD ["./hellogo"]
 ---> Running in c79942f919a5
Removing intermediate container c79942f919a5
 ---> 12436599a7e0
Successfully built 12436599a7e0
Successfully tagged dockerhub/hellogo:c1d5205-dirty-20180717000743

real	0m1.988s
user	0m0.256s
sys	0m0.088s
$ docker images
REPOSITORY          TAG                            IMAGE ID            CREATED             SIZE
dockerhub/hellogo   c1d5205-dirty-20180717000743   12436599a7e0        3 seconds ago       801MB
golang              1.10.3                         4e611157870f        2 weeks ago         794MB
$ docker rmi 12436599a7e0
Untagged: dockerhub/hellogo:c1d5205-dirty-20180717000743
Deleted: sha256:12436599a7e0541c0bdae67676577469833f5735308b2d3465dfadbfdc4be360
Deleted: sha256:a4bfa7b8f01f5a20d561307d7c84882cfb31871736dd21c57299e158d7748e49
Deleted: sha256:7530894af18123d9d814f5b1cbb929aa291dfa7e0c9991c06151451eb911a722
Deleted: sha256:610555b8a071eac0d2f2e5bc2c93fc66978562ab1e9eca2c1faf7aa66cc4f1a2
Deleted: sha256:bd0c30d5848fafc01a5c39aa976113c9b6e0a5da82d3fd0f891fe28c1436633a
Deleted: sha256:5d657bb48d5bf4d6fae7d75996c44291b26847face36ec27cdbb1106d02976c8
Deleted: sha256:17e3e70c2e33323469fb7690531caf92327b88e5284df822c6045fb7c49af52f
Deleted: sha256:fb7d144ec2bfdd8d642f3447c04dd688e1f919c75beed4c6a34f2a31d918e68b
$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
golang              1.10.3              4e611157870f        2 weeks ago         794MB
$ time make build.dockerbuilder
go build -o hellogo -v
docker build --rm -t dockerhub/hellogo:c1d5205-dirty-20180717000819 -f DockerfileBuilder .
Sending build context to Docker daemon  21.68MB
Step 1/10 : FROM golang:1.10.3 as builder
 ---> 4e611157870f
Step 2/10 : WORKDIR /go/src/github.com/lotharschulz/hellogodocker/
Removing intermediate container 7d1daacb73bc
 ---> 8e03a75db062
Step 3/10 : COPY hello.go	.
 ---> cabeb8cf4a7b
Step 4/10 : RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o hellogodocker .
 ---> Running in f7704c2e335a
Removing intermediate container f7704c2e335a
 ---> 02fa0cfe36c6
Step 5/10 : FROM alpine:latest
latest: Pulling from library/alpine
8e3ba11ec2a2: Already exists 
Digest: sha256:7043076348bf5040220df6ad703798fd8593a0918d06d3ce30c6c93be117e430
Status: Downloaded newer image for alpine:latest
 ---> 11cd0b38bc3c
Step 6/10 : RUN apk --no-cache add ca-certificates &&     addgroup -g 99 appuser &&     adduser -D -u 99 -G appuser appuser
 ---> Running in ba36eb22636a
fetch http://dl-cdn.alpinelinux.org/alpine/v3.8/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.8/community/x86_64/APKINDEX.tar.gz
(1/1) Installing ca-certificates (20171114-r3)
Executing busybox-1.28.4-r0.trigger
Executing ca-certificates-20171114-r3.trigger
OK: 5 MiB in 14 packages
Removing intermediate container ba36eb22636a
 ---> 18cd328ca774
Step 7/10 : USER appuser
 ---> Running in cc8b2f04c81d
Removing intermediate container cc8b2f04c81d
 ---> fa8fe958ba8a
Step 8/10 : WORKDIR /app
Removing intermediate container 38a03232f2e1
 ---> 992f3e1b3c65
Step 9/10 : COPY --from=builder /go/src/github.com/lotharschulz/hellogodocker/hellogodocker .
 ---> 052be63a2444
Step 10/10 : CMD ["./hellogodocker"]
 ---> Running in 879bf770c2f6
Removing intermediate container 879bf770c2f6
 ---> 941b9022e543
Successfully built 941b9022e543
Successfully tagged dockerhub/hellogo:c1d5205-dirty-20180717000819

real	0m15.125s
user	0m0.248s
sys	0m0.100s
$ docker images
REPOSITORY          TAG                            IMAGE ID            CREATED             SIZE
dockerhub/hellogo   c1d5205-dirty-20180717000819   941b9022e543        13 seconds ago      11.5MB
<none>              <none>                         02fa0cfe36c6        18 seconds ago      816MB
alpine              latest                         11cd0b38bc3c        10 days ago         4.41MB
golang              1.10.3                         4e611157870f        2 weeks ago         794MB
$ docker rmi -f 941b9022e543 02fa0cfe36c6 11cd0b38bc3c
Untagged: dockerhub/hellogo:c1d5205-dirty-20180717000819
Deleted: sha256:941b9022e5432348b1553c19ec0b197323180a3a664e909bc004fbb6a9ab61ce
Deleted: sha256:052be63a2444e6e3945f4fd81bb6480a64a872ccc0baeb2e054df656f5800c4a
Deleted: sha256:a1a09aa8cb7fef144b9cfb2be3e92e783ebfeb04a2d98ae2a8e581c541527510
Deleted: sha256:992f3e1b3c65331b8ff6aafa00a4e2fc5123c09a70a384ec2d813f3001f0f045
Deleted: sha256:27c2438c094f3277972288e52a59d0c0296c5cffc422d0dbccd2c4d6c254689c
Deleted: sha256:fa8fe958ba8ae3adc222850012216fe28e4bda6b11a2663cfe605d5f0e777f61
Deleted: sha256:18cd328ca7744ae73ae07cc92e699c196be20e3e3b56eedd5de6cedd37976761
Deleted: sha256:4f83116f71b48445b632ad5c4e4f7c4ebe199e50bdfefa7f29149e0a284cec32
Deleted: sha256:02fa0cfe36c6e86ab6ceffac40a8c1db29f84e6e69b3c9221232255dbac04a75
Deleted: sha256:3b57d11538990a91503a8bbab108dc445b96165f0779a4d19548352523b37fdf
Deleted: sha256:cabeb8cf4a7ba0f3b85864f2c7c71be1253fc6302e84319a37c85969c6cfd1da
Deleted: sha256:52fa53aaf62bbdcb33399947c69d0169ea811a6519e6ae4fb0cc880e41fc6a48
Deleted: sha256:8e03a75db06289f791f318e4e0581f3ad509b057ba2ba2e88d38d3c2b91c4a3a
Deleted: sha256:e50532a45a6a3c776752dd425ccba7c35e8edbe0d18161863e7f0a3265b22683
Untagged: alpine:latest
Untagged: alpine@sha256:7043076348bf5040220df6ad703798fd8593a0918d06d3ce30c6c93be117e430
Deleted: sha256:11cd0b38bc3ceb958ffb2f9bd70be3fb317ce7d255c8a4c3f4af30e298aa1aab
$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
golang              1.10.3              4e611157870f        2 weeks ago         794MB
$ time make build.dockerbuilder-cache
go build -o hellogo -v
docker build --cache-from golang:1.10.3 --cache-from alpine:latest -t dockerhub/hellogo:c1d5205-dirty-20180717001012 -f DockerfileBuilder .
Sending build context to Docker daemon  21.68MB
Step 1/10 : FROM golang:1.10.3 as builder
 ---> 4e611157870f
Step 2/10 : WORKDIR /go/src/github.com/lotharschulz/hellogodocker/
Removing intermediate container 722ef434e51d
 ---> eaf7d62df731
Step 3/10 : COPY hello.go	.
 ---> ab84d2ce8a0f
Step 4/10 : RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o hellogodocker .
 ---> Running in 5d57fee6c528
Removing intermediate container 5d57fee6c528
 ---> 8c13ed72431a
Step 5/10 : FROM alpine:latest
latest: Pulling from library/alpine
8e3ba11ec2a2: Already exists 
Digest: sha256:7043076348bf5040220df6ad703798fd8593a0918d06d3ce30c6c93be117e430
Status: Downloaded newer image for alpine:latest
 ---> 11cd0b38bc3c
Step 6/10 : RUN apk --no-cache add ca-certificates &&     addgroup -g 99 appuser &&     adduser -D -u 99 -G appuser appuser
 ---> Running in 05ff9c487e1a
fetch http://dl-cdn.alpinelinux.org/alpine/v3.8/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.8/community/x86_64/APKINDEX.tar.gz
(1/1) Installing ca-certificates (20171114-r3)
Executing busybox-1.28.4-r0.trigger
Executing ca-certificates-20171114-r3.trigger
OK: 5 MiB in 14 packages
Removing intermediate container 05ff9c487e1a
 ---> 8fdfbb21e2fd
Step 7/10 : USER appuser
 ---> Running in 74b8764ab87f
Removing intermediate container 74b8764ab87f
 ---> 4871c79a629b
Step 8/10 : WORKDIR /app
Removing intermediate container 833f73287a3a
 ---> a685746041f5
Step 9/10 : COPY --from=builder /go/src/github.com/lotharschulz/hellogodocker/hellogodocker .
 ---> a566de844eba
Step 10/10 : CMD ["./hellogodocker"]
 ---> Running in d9da8a761126
Removing intermediate container d9da8a761126
 ---> ccd01d4e9e4e
Successfully built ccd01d4e9e4e
Successfully tagged dockerhub/hellogo:c1d5205-dirty-20180717001012

real	0m15.194s
user	0m0.296s
sys	0m0.064s
$ docker images
REPOSITORY          TAG                            IMAGE ID            CREATED             SIZE
dockerhub/hellogo   c1d5205-dirty-20180717001012   ccd01d4e9e4e        18 seconds ago      11.5MB
<none>              <none>                         8c13ed72431a        23 seconds ago      816MB
alpine              latest                         11cd0b38bc3c        10 days ago         4.41MB
golang              1.10.3                         4e611157870f        2 weeks ago         794MB
$ docker rmi -f ccd01d4e9e4e 11cd0b38bc3c 8c13ed72431a
Untagged: dockerhub/hellogo:c1d5205-dirty-20180717001012
Deleted: sha256:ccd01d4e9e4e43dfd6ea3fb929ed7d8fbe807a7b57b0f7ab8f5db14acc849628
Deleted: sha256:a566de844eba4332382109dcb54c12b8bf16104564f3081667859df8de339ecc
Deleted: sha256:c63d0c2c38ed946f763862715e2ed741d79d941ecfcab213d8d8e725f6823ea7
Deleted: sha256:a685746041f52a4ae76c8edd610611ff273dab90f479763b070a8f3335207ccb
Deleted: sha256:0ba0c9828ae926a579de96cfbdb89724d1a9e51a81868a607be848146ee2f659
Deleted: sha256:4871c79a629b3be4d308817338c01e2eb2ee6bb967a2e3108023e8c7329ae267
Deleted: sha256:8fdfbb21e2fdebd385dd1c05d5370c763602bd06eeb8c54ed185d6f0957dd5d8
Deleted: sha256:2bc25c9714eb7d86a586c5f04e53184bc7982999a37b7a310d081768b3ea8e18
Untagged: alpine:latest
Untagged: alpine@sha256:7043076348bf5040220df6ad703798fd8593a0918d06d3ce30c6c93be117e430
Deleted: sha256:11cd0b38bc3ceb958ffb2f9bd70be3fb317ce7d255c8a4c3f4af30e298aa1aab
Deleted: sha256:8c13ed72431a9dd47c3c4f2ee797571a7bf53235f6e8a02b4a219162e196f9a2
Deleted: sha256:a355e91143b04dc0343429d0c092eaca5f07b4b9439c3b08789ed1936165f2b2
Deleted: sha256:ab84d2ce8a0fd815b6713388732092adc86e0db9bc7fd7b0c6fa8189498b16f1
Deleted: sha256:dc1ad7db81a7532f54ad40315ad898f4691b2e2410a7c89a176988b1b90b8ab5
Deleted: sha256:eaf7d62df731a7d6e0cb0258c5ea226125a55146230b873bdc740a2d2cf711c2
Deleted: sha256:cb146dad5f3e5524516b3ae1ca1d84e5931fd6c3770dcbe058c7f52c3a53659e
$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
golang              1.10.3              4e611157870f        2 weeks ago         794MB
$ time make build.docker-min
CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o hellogo .
docker build --rm -t dockerhub/hellogo:c1d5205-dirty-20180717001304 -f DockerfileMin .
Sending build context to Docker daemon  21.62MB
Step 1/4 : FROM scratch
 ---> 
Step 2/4 : ADD ca-certificates.crt /etc/ssl/certs/
 ---> 8c55d572ba64
Step 3/4 : ADD hellogo /
 ---> dd568e3219fc
Step 4/4 : CMD ["/hellogo"]
 ---> Running in 071293f38247
Removing intermediate container 071293f38247
 ---> c0925baa1b1c
Successfully built c0925baa1b1c
Successfully tagged dockerhub/hellogo:c1d5205-dirty-20180717001304

real	0m8.594s
user	0m23.848s
sys	0m1.332s
$ docker images
REPOSITORY          TAG                            IMAGE ID            CREATED             SIZE
dockerhub/hellogo   c1d5205-dirty-20180717001304   c0925baa1b1c        6 seconds ago       6.8MB
golang              1.10.3                         4e611157870f        2 weeks ago         794MB

